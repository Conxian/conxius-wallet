<<<<<<< SEARCH
      } else {
        const payloadHash = bitcoin.crypto.sha256(
          Buffer.from(JSON.stringify(request.payload)),
        );
        signature = Buffer.from(child.sign(Buffer.from(payloadHash))).toString(
          "hex",
        );
        broadcastHex = "";
      }
=======
      } else {
        const payloadHash = bitcoin.crypto.sha256(
          Buffer.from(JSON.stringify(request.payload)),
        );
        if (derived.privateKey) {
          const child = bip32.fromPrivateKey(Buffer.from(derived.privateKey, 'hex'), Buffer.alloc(32));
          signature = Buffer.from(child.sign(Buffer.from(payloadHash))).toString("hex");
        }
        broadcastHex = "";
      }
>>>>>>> REPLACE
